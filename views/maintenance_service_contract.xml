<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_maintenance_service_contract_list" model="ir.ui.view">
    <field name="name">maintenance.service.contract.list</field>
    <field name="model">maintenance.service.contract</field>
    <field name="arch" type="xml">
      <list string="Maintenance Service Contracts">
        <field name="name"/>
        <field name="contract_start_date"/>
        <field name="contract_end_date"/>
        <field name="sla_duration"/>
        <field name="renewal_alert_days"/>
        <field name="cost"/>
        <field name="client_id"/>
        <field name="supplier_id"/>
      </list>
    </field>
  </record>

  <record id="view_maintenance_service_contract_form" model="ir.ui.view">
    <field name="name">maintenance.service.contract.form</field>
    <field name="model">maintenance.service.contract</field>
    <field name="arch" type="xml">
      <form string="Maintenance Service Contract">
        <header>
            <button 
                    name="action_confirm_contract"
                    type="object"
                    string="Confirmer"
                    class="btn-primary"
                    invisible="state != 'draft'"/>
            <button 
                    name="action_cancelled_contract"
                    type="object"
                    string="Cancel"
                    class="btn-secondary"
                    invisible="state != 'draft' or id == False "/>
            <button 
                    name="action_reset_to_draft"
                    type="object"
                    string="Reset to Draft"
                    class="btn-secondary"
                    invisible="state != 'active'"/>

            <button name="action_send_email" 
                    string="Send by Email" 
                    type="object" 
                    class="btn-primary" 
                    invisible="state != 'active'"/>
            <button name="action_print_contract" 
                    string="Print" 
                    type="object" 
                    class="btn-secondary" 
                    invisible="state != 'active'"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,active"/>
        </header>
        <sheet>
          <group>
            <group string="Contract Details">
              <field name="name"/>
              <field name="contract_start_date"/>
              <field name="contract_end_date"/>
              <field name="sla_duration"/>
              <field name="renewal_alert_days"/>
              <field name="cost"/>
            </group>
            <group string="Associated Information">
              <field name="associated_equipments" widget="many2many_tags"/>
              <field name="supplier_id"/>
              <field name="client_id"/>
              <field name="auto_renew"/>
            </group>
          </group>
          <group string="SLA Monitoring">
            <field name="sla_breached" readonly="1"/>
          </group>
        </sheet>
        <chatter/>
      </form>
    </field>
  </record>

  <record id="view_maintenance_service_contract_calendar" model="ir.ui.view">
    <field name="name">maintenance.service.contract.calendar</field>
    <field name="model">maintenance.service.contract</field>
    <field name="arch" type="xml">
      <calendar string="Contract Expiry Calendar" date_start="contract_end_date">
        <field name="name"/>
        <field name="client_id"/>
        <field name="supplier_id"/>
      </calendar>
    </field>
  </record>

  <record id="report_maintenance_contract_pdf" model="ir.actions.report">
      <field name="name">Contract PDF</field>
      <field name="model">maintenance.service.contract</field>
      <field name="report_type">qweb-pdf</field>
      <field name="report_name">module_gmao_odoo.report_maintenance_contract_template</field>
      <field name="print_report_name">(object._get_report_base_filename())</field>
  </record>

</odoo>
